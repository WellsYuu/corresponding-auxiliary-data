/*!
 * dtGrid v1.1.9
 *
 * includes: jquery, bootstrap, fontawesome, My97 DatePicker
 * Copyright 2015, http://www.dtgrid.com, http://www.dlshouwen.com
 */
!function($){$.fn.DtGrid={init:function(options,name){var i,dtGridObject;for(i=0;i<options.columns.length;i++)options.columns[i]=$.extend({},$.fn.DtGrid.defaultOptions.column,options.columns[i]);return options=$.extend({},$.fn.DtGrid.defaultOptions.grid,options),options.id||(options.id=$.fn.DtGrid.tools.guid()),$.fn.DtGrid.lang[options.lang]||(options.lang="en"),dtGridObject={init:{toolsIsInit:!1,printWindowIsInit:!1,exportWindowIsInit:{},fastQueryWindowIsInit:!1,advanceQueryWindowIsInit:!1,reloadPagerParameter:1},pager:{pageSize:0,startRecord:0,nowPage:0,recordCount:0,pageCount:0},option:options,originalDatas:null,baseDatas:null,exhibitDatas:null,sortParameter:{columnId:"",sortType:0},sortOriginalDatas:null,parameters:null,fastQueryParameters:null,fastQueryOriginalDatas:null,advanceQueryParameter:{advanceQueryConditions:null,advanceQuerySorts:null},printColumns:null,exportColumns:null,exportDatas:null,load:function(){var b,c,d,a=this;if(a.showProcessBar(),0==a.init.toolsIsInit){if(a.init.toolsIsInit=!0,a.constructGridToolBar(),a.pager.pageSize=a.option.pageSize,!a.option.ajaxLoad)if(a.init.reloadPagerParameter,a.pager.startRecord=0,a.pager.nowPage=1)return a.hideProcessBar(function(){a.originalDatas=a.option.datas,a.originalDatas=a.originalDatas?a.originalDatas:new Array,a.baseDatas=a.originalDatas.slice(0,a.originalDatas.length),a.pager.recordCount=a.baseDatas.length,a.pager.pageCount=Math.floor((a.pager.recordCount-1)/a.pager.pageSize)+1,a.exhibitDatas=a.baseDatas.slice(a.pager.startRecord,a.pager.startRecord+a.pager.pageSize),a.sortOriginalDatas=a.exhibitDatas.slice(0,a.exhibitDatas.length),a.constructGrid(),a.constructGridPageBar()}),void 0;if(a.option.loadAll)return b=a.option.loadURL,$.ajax({type:"post",url:b,data:null,contentType:"application/x-www-form-urlencoded; charset=utf-8",beforeSend:function(a){a.setRequestHeader("__REQUEST_TYPE","AJAX_REQUEST")},success:function(b){a.hideProcessBar(function(){a.originalDatas=$.parseJSON(JSON.stringify(b)),a.originalDatas=a.originalDatas?a.originalDatas:new Array,a.baseDatas=a.originalDatas.slice(0,a.originalDatas.length),a.pager.recordCount=a.baseDatas.length,a.pager.pageCount=Math.floor((a.pager.recordCount-1)/a.pager.pageSize)+1,a.exhibitDatas=a.baseDatas.slice(a.pager.startRecord,a.pager.startRecord+a.pager.pageSize),a.sortOriginalDatas=a.exhibitDatas.slice(0,a.exhibitDatas.length),a.constructGrid(),a.constructGridPageBar()}),$("[data-toggle='popover']").popover()},error:function(){a.hideProcessBar(function(){$.fn.DtGrid.tools.toast($.fn.DtGrid.lang[a.option.lang].errors.ajaxLoadError,"error",5e3),a.constructGrid(),a.constructGridPageBar()})}}),void 0}!a.option.ajaxLoad||a.option.loadAll?a.hideProcessBar(function(){(a.fastQueryParameters||a.advanceQueryParameter)&&(a.baseDatas=a.originalDatas,a.fastQueryParameters&&(a.baseDatas=a.doFaseQueryDatasFilter(a.baseDatas,a.fastQueryParameters)),a.advanceQueryParameter&&(a.baseDatas=a.doAdvanceQueryDatasFilter(a.baseDatas,a.advanceQueryParameter))),a.pager.recordCount=a.baseDatas.length,a.pager.pageCount=0==a.pager.recordCount?0:Math.floor((a.pager.recordCount-1)/a.pager.pageSize)+1,a.pager.nowPage>a.pager.pageCount&&(a.pager.nowPage=a.pager.pageCount,a.pager.startRecord=a.pager.pageSize*(a.pager.nowPage-1)),a.pager.startRecord=a.pager.pageSize*(a.pager.nowPage-1),0==a.baseDatas.length&&(a.pager.nowPage=1,a.pager.startRecord=0),a.exhibitDatas=a.baseDatas.slice(a.pager.startRecord,a.pager.startRecord+a.pager.pageSize),a.sortOriginalDatas=a.exhibitDatas.slice(0,a.exhibitDatas.length),a.constructGrid(),a.constructGridPageBar()}):(b=a.option.loadURL,c=new Object,c.isExport=!1,c.pageSize=a.pager.pageSize,c.startRecord=a.pager.startRecord,c.nowPage=a.pager.nowPage,c.recordCount=a.pager.recordCount?a.pager.recordCount:-1,c.pageCount=a.pager.pageCount?a.pager.pageCount:-1,c.parameters=a.parameters?a.parameters:new Object,c.fastQueryParameters=a.fastQueryParameters?a.fastQueryParameters:new Object,c.advanceQueryConditions=a.advanceQueryParameter&&a.advanceQueryParameter.advanceQueryConditions?a.advanceQueryParameter.advanceQueryConditions:new Array,c.advanceQuerySorts=a.advanceQueryParameter&&a.advanceQueryParameter.advanceQuerySorts?a.advanceQueryParameter.advanceQuerySorts:new Array,d=new Object,d.dtGridPager=JSON.stringify(c),$.ajax({type:"post",url:b,data:d,contentType:"application/x-www-form-urlencoded; charset=utf-8",beforeSend:function(a){a.setRequestHeader("__REQUEST_TYPE","AJAX_REQUEST")},success:function(b){return b=$.parseJSON(JSON.stringify(b)),b.isSuccess?(a.hideProcessBar(function(){a.exhibitDatas=b.exhibitDatas,a.sortOriginalDatas=a.exhibitDatas.slice(0,a.exhibitDatas.length),a.pager.pageSize=b.pageSize,a.pager.startRecord=b.startRecord,a.pager.nowPage=b.nowPage,a.pager.recordCount=b.recordCount,a.pager.pageCount=b.pageCount,a.constructGrid(),a.constructGridPageBar(),$("[data-toggle='popover']").popover()}),void 0):($.fn.DtGrid.tools.toast($.fn.DtGrid.lang[a.option.lang].errors.ajaxLoadError,"error",5e3),a.hideProcessBar(),void 0)},error:function(){a.hideProcessBar(function(){$.fn.DtGrid.tools.toast($.fn.DtGrid.lang[a.option.lang].errors.ajaxLoadError,"error",5e3),a.constructGrid(),a.constructGridPageBar()})}}))},constructGrid:function(){var d,e,f,g,h,a=this,b=a.getExtraColumnClass(),c="";if(c+='<table class="dt-grid '+a.option.tableClass+'" id="dt_grid_'+a.option.id+'" style="'+a.option.tableStyle+'">',0!=a.option.showHeader){for(d=a.option.columns,c+="<thead>",c+='	<tr class="dt-grid-headers">',c+='		<th class="extra-column '+b+'"></th>',a.option.check&&(c+='	<th class="check-column"><input type="checkbox" class="checkbox checkbox-info" id="dt_grid_'+a.option.id+'_check" value="check"></th>'),e=0;e<d.length;e++)c+='	<th columnNo="'+e+'" columnId="'+d[e].id+'" class="dt-grid-header '+a.getColumnClassForHide(d[e])+" "+d[e].headerClass+' can-sort" style="'+d[e].headerStyle+'">',a.sortParameter&&a.sortParameter.columnId&&a.sortParameter.columnId==d[e].id&&("1"==a.sortParameter.sortType&&(c+='<span class="dt-grid-sort">'+$.fn.DtGrid.lang[a.option.lang].sortColumn.asc+"</span>"),"2"==a.sortParameter.sortType&&(c+='<span class="dt-grid-sort dt-grid-sort-desc">'+$.fn.DtGrid.lang[a.option.lang].sortColumn.desc+"</span>")),c+="		"+d[e].title,c+="	</th>";c+="	</tr>",c+="</thead>"}if(c+="	<tbody>",null!=a.exhibitDatas)for(a.sortParameter&&a.sortParameter.columnId&&(a.exhibitDatas=0!=a.sortParameter.sortType?a.exhibitDatas.sort(function(b,c){var d=b[a.sortParameter.columnId],e=c[a.sortParameter.columnId];if(d&&e){if(!isNaN(d)&&!isNaN(e)){if(1==a.sortParameter.sortType)return d-e;if(2==a.sortParameter.sortType)return e-d}if(d instanceof Date&&e instanceof Date){if(1==a.sortParameter.sortType)return d.getTime()-e.getTime();if(2==a.sortParameter.sortType)return e.getTime()-d.getTime()}if(1==a.sortParameter.sortType)return d.localeCompare(e);if(2==a.sortParameter.sortType)return e.localeCompare(d)}return 0}):a.sortOriginalDatas.slice(0,a.sortOriginalDatas.length)),e=0;e<a.exhibitDatas.length;e++){for(c+='	<tr class="dt-grid-row" dataNo="'+e+'">',c+='		<td class="extra-column extra-column-event '+b+'" dataNo="'+e+'">'+$.fn.DtGrid.lang[a.option.lang].extraColumn.open+"</td>",a.option.check&&(c+='	<td class="check-column text-center"><input type="checkbox" class="checkbox checkbox-info" dataNo="'+e+'" id="dt_grid_'+a.option.id+"_check_"+e+'" class="dt-grid-check" value="'+e+'"></td>'),d=a.option.columns,f=0;f<d.length;f++)c+='	<td dataNo="'+e+'" columnNo="'+f+'" class="dt-grid-cell '+a.getColumnClassForHide(d[f])+" "+d[f].columnClass+'" style="'+d[f].columnStyle+'">',g=a.exhibitDatas[e][d[f].id],g=null==g?"":g,c+=d[f].resolution?d[f].resolution(g,a.exhibitDatas[e],d[f],a,e,f):a.formatContent(d[f],g),c+="	</td>";for(c+="	</tr>",c+='	<tr id="dt_grid_'+a.option.id+"_extra_columns_"+e+'" class="dt-grid-extra-columns hidden">',c+='		<td dataNo="'+e+'" colspan="'+(d.length+1+(a.option.check?1:0))+'">',f=0;f<d.length;f++)0!=d[f].extra&&(c+='		<p dataNo="'+e+'" columnNo="'+f+'" class="dt-grid-cell '+a.getExtraColumnClassForHide(d[f])+'">',c+="			"+d[f].title+" : ",g=a.exhibitDatas[e][d[f].id],g=null==g?"":g,c+=d[f].resolution?d[f].resolution(g,a.exhibitDatas[e],d[f],a,e,f):a.formatContent(d[f],g),c+="		</p>");c+="		</td>",c+="	</tr>"}c+="	</tbody>",c+="</table>",$("#dt_grid_"+a.option.id).remove(),$("#"+a.option.gridContainer).append(c),h=a.option.id,a.option.onCellClick&&$("#dt_grid_"+h+" .dt-grid-cell").click(function(b){a.bindCellEvent(a.option.onCellClick,this,b)}),a.option.onCellDblClick&&$("#dt_grid_"+h+" .dt-grid-cell").dblclick(function(b){a.bindCellEvent(a.option.onCellDblClick,this,b)}),a.option.onCellMouseOver&&$("#dt_grid_"+h+" .dt-grid-cell").mouseover(function(b){a.bindCellEvent(a.option.onCellMouseOver,this,b)}),a.option.onCellMouseMove&&$("#dt_grid_"+h+" .dt-grid-cell").mousemove(function(b){a.bindCellEvent(a.option.onCellMouseMove,this,b)}),a.option.onCellMouseOut&&$("#dt_grid_"+h+" .dt-grid-cell").mouseout(function(b){a.bindCellEvent(a.option.onCellMouseOut,this,b)}),a.option.onCellMouseDown&&$("#dt_grid_"+h+" .dt-grid-cell").mousedown(function(b){a.bindCellEvent(a.option.onCellMouseDown,this,b)}),a.option.onCellMouseUp&&$("#dt_grid_"+h+" .dt-grid-cell").mouseup(function(b){a.bindCellEvent(a.option.onCellMouseUp,this,b)}),a.option.onRowClick&&$("#dt_grid_"+h+" .dt-grid-cell").click(function(b){a.bindRowEvent(a.option.onRowClick,this,b)}),a.option.onRowDblClick&&$("#dt_grid_"+h+" .dt-grid-cell").dblclick(function(b){a.bindRowEvent(a.option.onRowDblClick,this,b)}),a.option.onRowMouseOver&&$("#dt_grid_"+h+" .dt-grid-cell").mouseover(function(b){a.bindRowEvent(a.option.onRowMouseOver,this,b)}),a.option.onRowMouseMove&&$("#dt_grid_"+h+" .dt-grid-cell").mousemove(function(b){a.bindRowEvent(a.option.onRowMouseMove,this,b)}),a.option.onRowMouseOut&&$("#dt_grid_"+h+" .dt-grid-cell").mouseout(function(b){a.bindRowEvent(a.option.onRowMouseOut,this,b)}),a.option.onRowMouseDown&&$("#dt_grid_"+h+" .dt-grid-cell").mousedown(function(b){a.bindRowEvent(a.option.onRowMouseDown,this,b)}),a.option.onRowMouseUp&&$("#dt_grid_"+h+" .dt-grid-cell").mouseup(function(b){a.bindRowEvent(a.option.onRowMouseUp,this,b)}),a.option.onHeaderClick&&$("#dt_grid_"+h+" .dt-grid-header").click(function(b){a.bindHeaderEvent(a.option.onHeaderClick,this,b)}),a.option.onHeaderMouseOver&&$("#dt_grid_"+h+" .dt-grid-header").mouseover(function(b){a.bindHeaderEvent(a.option.onHeaderMouseOver,this,b)}),a.option.onHeaderMouseMove&&$("#dt_grid_"+h+" .dt-grid-header").mousemove(function(b){a.bindHeaderEvent(a.option.onHeaderMouseMove,this,b)}),a.option.onHeaderMouseOut&&$("#dt_grid_"+h+" .dt-grid-header").mouseout(function(b){a.bindHeaderEvent(a.option.onHeaderMouseOut,this,b)}),a.option.onHeaderMouseDown&&$("#dt_grid_"+h+" .dt-grid-header").mousedown(function(b){a.bindHeaderEvent(a.option.onHeaderMouseDown,this,b)}),a.option.onHeaderMouseUp&&$("#dt_grid_"+h+" .dt-grid-header").mouseup(function(b){a.bindHeaderEvent(a.option.onHeaderMouseUp,this,b)}),a.option.onGridClick&&$("#dt_grid_"+h).click(function(b){a.bindGridEvent(a.option.onGridClick,b)}),a.option.onGridDblClick&&$("#dt_grid_"+h).dblclick(function(b){a.bindGridEvent(a.option.onGridDblClick,b)}),a.option.onGridMouseOver&&$("#dt_grid_"+h).mouseover(function(b){a.bindGridEvent(a.option.onGridMouseOver,b)}),a.option.onGridMouseMove&&$("#dt_grid_"+h).mousemove(function(b){a.bindGridEvent(a.option.onGridMouseMove,b)}),a.option.onGridMouseOut&&$("#dt_grid_"+h).mouseout(function(b){a.bindGridEvent(a.option.onGridMouseOut,b)}),a.option.onGridMouseDown&&$("#dt_grid_"+h).mousedown(function(b){a.bindGridEvent(a.option.onGridMouseDown,b)}),a.option.onGridMouseUp&&$("#dt_grid_"+h).mouseup(function(b){a.bindGridEvent(a.option.onGridMouseUp,b)}),a.option.onGridComplete&&a.bindGridEvent(a.option.onGridComplete),$("#dt_grid_"+h+" .extra-column-event").click(function(b){var d,c=$(this).attr("dataNo");$("#dt_grid_"+h+"_extra_columns_"+c).hasClass("hidden")?($("#dt_grid_"+h+"_extra_columns_"+c).removeClass("hidden"),$(this).html($.fn.DtGrid.lang[a.option.lang].extraColumn.close),a.option.onExtraOpen&&(d=$("#dt_grid_"+h+' tr[dataNo="'+c+'"]'),a.bindExtraEvent(a.option.onExtraOpen,d,b))):($("#dt_grid_"+h+"_extra_columns_"+c).addClass("hidden"),$(this).html($.fn.DtGrid.lang[a.option.lang].extraColumn.open),a.option.onExtraClose&&(d=$("#dt_grid_"+h+' tr[dataNo="'+c+'"]'),a.bindExtraEvent(a.option.onExtraClose,d,b)))}),$("#dt_grid_"+h+" .can-sort").click(function(){var c,b=$(this).attr("columnId");null==a.sortParameter&&(a.sortParameter=new Object),a.sortParameter.columnId&&a.sortParameter.columnId==b?(c=a.sortParameter.sortType,0==c?a.sortParameter.sortType=1:1==c?a.sortParameter.sortType=2:2==c&&(a.sortParameter.sortType=0)):(a.sortParameter.columnId=b,a.sortParameter.sortType=1),a.reload()}),a.option.onCheck&&$("input[id*=dt_grid_"+h+"_check_]").click(function(b){a.bindCheckEvent(a.option.onCheck,this,b)}),a.option.check&&$("#dt_grid_"+h+"_check").click(function(b){$("input[id*=dt_grid_"+h+"_check_]").attr("checked",this.checked),a.option.onCheck&&$("input[id*=dt_grid_"+h+"_check_]").each(function(){a.bindCheckEvent(a.option.onCheck,this,b)})})},bindCellEvent:function(a,b,c){var j,k,l,m,d=this,e=d.option.id,f=$(b).attr("dataNo"),g=$(b).attr("columnNo"),h=d.option.columns[g],i=d.exhibitDatas[f];j=h.resolution?h.resolution(i[h.id],i,h,d,f,g):d.formatContent(h,i[h.id]),k=$(b),l=$("#dt_grid_"+e+' tr[dataNo="'+f+'"]'),m=$("#dt_grid_"+e+' .dt-grid-extra-columns>td[dataNo="'+f+'"]'),a(j,i,h,d,f,g,k,l,m,c)},bindRowEvent:function(a,b,c){var j,k,l,m,d=this,e=d.option.id,f=$(b).attr("dataNo"),g=$(b).attr("columnNo"),h=d.option.columns[g],i=d.exhibitDatas[f];j=h.resolution?h.resolution(i[h.id],i,h,d,f,g):d.formatContent(h,i[h.id]),k=$(b),l=$("#dt_grid_"+e+' tr[dataNo="'+f+'"]'),m=$("#dt_grid_"+e+' .dt-grid-extra-columns>td[dataNo="'+f+'"]'),a(j,i,h,d,f,g,k,l,m,c)},bindHeaderEvent:function(a,b,c){var d=this,e=d.option.id,f=$(b).attr("columnNo"),g=d.option.columns[f],h=g.title,i=$(b),j=$("#dt_grid_"+e+" tr.dt-grid-headers");a(h,g,d,f,i,j,c)},bindGridEvent:function(a,b){var c=this;a(c,b)},bindExtraEvent:function(a,b,c){var d=this,e=d.option.id,f=$(b).attr("dataNo"),g=d.exhibitDatas[f],h=$("#dt_grid_"+e+' tr[dataNo="'+f+'"]'),i=$("#dt_grid_"+e+' .dt-grid-extra-columns>td[dataNo="'+f+'"]');a(g,d,f,h,i,c)},bindCheckEvent:function(a,b,c){var d=this,e=d.option.id,f=$(b).attr("dataNo"),g=d.exhibitDatas[f],h=$("#dt_grid_"+e+' tr[dataNo="'+f+'"]'),i=$("#dt_grid_"+e+' .dt-grid-extra-columns>td[dataNo="'+f+'"]');a(b.checked,g,d,f,h,i,c)},constructGridPageBar:function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,a=this;if($("#"+a.option.toolbarContainer+" .dt-grid-pager").html(""),b=a.pager.nowPage,c=a.pager.pageCount,d=document.createElement("span"),null==a.exhibitDatas||a.exhibitDatas.length<=0)d.className="dt-grid-pager-status text-primary",d.innerHTML=$.fn.DtGrid.lang[a.option.lang].pageInfo.nothing;else{if(d.className="dt-grid-pager-status text-primary",e=$.fn.DtGrid.lang[a.option.lang].pageInfo.info,e=$.fn.DtGrid.tools.replaceAll(e,"{startRecord}",a.pager.startRecord),e=$.fn.DtGrid.tools.replaceAll(e,"{nowPage}",a.pager.nowPage),e=$.fn.DtGrid.tools.replaceAll(e,"{recordCount}",a.pager.recordCount),e=$.fn.DtGrid.tools.replaceAll(e,"{pageCount}",a.pager.pageCount),f="",g=a.pager.pageSize,"object"==typeof a.option.pageSizeLimit){for(f+='<select id="dt_grid_change_page_size_'+a.option.id+'" name="dt_grid_change_page_size_'+a.option.id+'" class="form-control change-page-size">',h=!1,i=new Array,j=0;j<a.option.pageSizeLimit.length;j++)k=a.option.pageSizeLimit[j],i.push(parseFloat(k)),g==k&&(h=!0);for(h||i.push(g),i.sort(function(a,b){return a>b}),j=0;j<i.length;j++)k=i[j],f+="	<option "+(g==k?'selected="selected"':"")+' value="'+k+'">'+k+"</option>";f+="</select>",e=$.fn.DtGrid.tools.replaceAll(e,"{pageSize}",f)}else"number"==typeof a.option.pageSizeLimit?(f+='<input id="dt_grid_change_page_size_'+a.option.id+'" name="dt_grid_change_page_size_'+a.option.id+'" type="text" class="form-control change-page-size" value="'+a.pager.pageSize+'" />',e=$.fn.DtGrid.tools.replaceAll(e,"{pageSize}",f)):e=$.fn.DtGrid.tools.replaceAll(e,"{pageSize}",g);d.innerHTML=e}if(l=document.createElement("ul"),l.id=a.option.id+"_dtGridOperations",l.className="pagination pagination-sm dt-grid-pager-button",$("#"+a.option.toolbarContainer+" .dt-grid-pager").append(l),$("#"+a.option.toolbarContainer+" .dt-grid-pager").append(d),$("#dt_grid_change_page_size_"+a.option.id).change(function(){var b=parseFloat(this.value);return isNaN(b)?($.fn.DtGrid.tools.toast($.fn.DtGrid.lang[a.option.lang].pageInfo.errors.notANumber,"warning",3e3),$("#dt_grid_change_page_size_"+a.option.id).val(a.pager.pageSize),void 0):"number"==typeof a.option.pageSizeLimit&&b>a.option.pageSizeLimit?($.fn.DtGrid.tools.toast($.fn.DtGrid.tools.replaceAll($.fn.DtGrid.lang[a.option.lang].pageInfo.errors.maxPageSize,"{pageSizeLimit}",a.option.pageSizeLimit),"warning",3e3),$("#dt_grid_change_page_size_"+a.option.id).val(a.pager.pageSize),void 0):(a.pager.pageSize=b,a.reload(!0),void 0)}),null!=a.exhibitDatas&&a.exhibitDatas.length>0){if(m=document.createElement("li"),m.id="dt_grid_"+a.option.id+"_page_first",m.title=$.fn.DtGrid.lang[a.option.lang].pageInfo.firstPageTitle,1>=b&&(m.className="disabled",m.title=$.fn.DtGrid.lang[a.option.lang].pageInfo.alreadyFirstPage),m.innerHTML='<a href="javascript:void(0);">'+$.fn.DtGrid.lang[a.option.lang].pageInfo.firstPage+"</a>",$("#"+a.option.id+"_dtGridOperations").append(m),$("#dt_grid_"+a.option.id+"_page_first").click(function(){a.loadByPage("first")}),n=document.createElement("li"),n.id="dt_grid_"+a.option.id+"_page_prev",n.title=$.fn.DtGrid.lang[a.option.lang].pageInfo.prevPageTitle,1>=b&&(n.className="disabled",n.title=$.fn.DtGrid.lang[a.option.lang].pageInfo.alreadyFirstPage),n.innerHTML='<a href="javascript:void(0);">'+$.fn.DtGrid.lang[a.option.lang].pageInfo.prevPage+"</a>",$("#"+a.option.id+"_dtGridOperations").append(n),$("#dt_grid_"+a.option.id+"_page_prev").click(function(){a.loadByPage("prev")}),5>=c)for(j=1;c>=j;j++)o=document.createElement("li"),o.id="dt_grid_"+a.option.id+"_page_"+j,o.setAttribute("page",j),o.title=$.fn.DtGrid.tools.replaceAll($.fn.DtGrid.lang[a.option.lang].pageInfo.nowPageTitle,"{nowPage}",j),o.className=j==b?"active":"",o.innerHTML='<a href="javascript:void(0);">'+$.fn.DtGrid.tools.replaceAll($.fn.DtGrid.lang[a.option.lang].pageInfo.nowPage,"{nowPage}",j)+"</a>",$("#"+a.option.id+"_dtGridOperations").append(o),j!=b&&$("#dt_grid_"+a.option.id+"_page_"+j).click(function(){a.goPage($(this).attr("page"))});else for(p=2,q=2,r=1>b-p?1:b-p,s=b+q>c?c:b+q,p+q+1>s-r+1&&(1==r&&(s+=p+q+1-(s-r+1),s=s>c?c:s),s==c&&(r-=p+q+1-(s-r+1),r=1>r?1:r)),j=r;s>=j;j++)o=document.createElement("li"),o.id="dt_grid_"+a.option.id+"_page_"+j,o.setAttribute("page",j),o.title=$.fn.DtGrid.tools.replaceAll($.fn.DtGrid.lang[a.option.lang].pageInfo.nowPageTitle,"{nowPage}",j),o.className=j==b?"active":"",o.innerHTML='<a href="javascript:void(0);">'+$.fn.DtGrid.tools.replaceAll($.fn.DtGrid.lang[a.option.lang].pageInfo.nowPage,"{nowPage}",j)+"</a>",$("#"+a.option.id+"_dtGridOperations").append(o),j!=b&&$("#dt_grid_"+a.option.id+"_page_"+j).click(function(){a.goPage($(this).attr("page"))});t=document.createElement("li"),t.className="active",t.innerHTML='<a href="javascript:void(0);">'+a.pager.nowPage+"</a>",u=document.createElement("li"),u.id="dt_grid_"+a.option.id+"_page_next",u.title=$.fn.DtGrid.lang[a.option.lang].pageInfo.nextPageTitle,b>=c&&(u.className="disabled",u.title=$.fn.DtGrid.lang[a.option.lang].pageInfo.alreadyLastPage),u.innerHTML='<a href="javascript:void(0);">'+$.fn.DtGrid.lang[a.option.lang].pageInfo.nextPage+"</a>",$("#"+a.option.id+"_dtGridOperations").append(u),$("#dt_grid_"+a.option.id+"_page_next").click(function(){a.loadByPage("next")}),v=document.createElement("li"),v.id="dt_grid_"+a.option.id+"_page_last",v.title=$.fn.DtGrid.lang[a.option.lang].pageInfo.lastPageTitle,b>=c&&(v.className="disabled",v.title=$.fn.DtGrid.lang[a.option.lang].pageInfo.alreadyLastPage),v.innerHTML='<a href="javascript:void(0);">'+$.fn.DtGrid.lang[a.option.lang].pageInfo.lastPage+"</a>",$("#"+a.option.id+"_dtGridOperations").append(v),$("#dt_grid_"+a.option.id+"_page_last").click(function(){a.loadByPage("last")})}$("#"+a.option.toolbarContainer+" .dt-grid-pager").append('<div class="clearfix"></div>'),$("#"+a.option.toolbarContainer).append('<div class="clearfix"></div>')},toolbar:function(a){var b=this,c={refresh:'<li title="'+$.fn.DtGrid.lang[b.option.lang].toolbar.refreshTitle+'"><a href="javascript:void(0);" id="refreshGrid_replaceId">'+$.fn.DtGrid.lang[b.option.lang].toolbar.refresh+"</a></li>",faseQuery:'<li title="'+$.fn.DtGrid.lang[b.option.lang].toolbar.faseQueryTitle+'"><a href="javascript:void(0);" id="faseQuery_replaceId">'+$.fn.DtGrid.lang[b.option.lang].toolbar.faseQuery+"</a></li>",advanceQuery:'<li title="'+$.fn.DtGrid.lang[b.option.lang].toolbar.advanceQueryTitle+'"><a href="javascript:void(0);" id="advanceQuery_replaceId">'+$.fn.DtGrid.lang[b.option.lang].toolbar.advanceQuery+"</a></li>",exportExcel:'<li title="'+$.fn.DtGrid.lang[b.option.lang].toolbar.exportExcelTitle+'"><a href="javascript:void(0);" id="exportExcelGrid_replaceId">'+$.fn.DtGrid.lang[b.option.lang].toolbar.exportExcel+"</a></li>",exportCsv:'<li title="'+$.fn.DtGrid.lang[b.option.lang].toolbar.exportCsvTitle+'"><a href="javascript:void(0);" id="exportCsvGrid_replaceId">'+$.fn.DtGrid.lang[b.option.lang].toolbar.exportCsv+"</a></li>",exportPdf:'<li title="'+$.fn.DtGrid.lang[b.option.lang].toolbar.exportPdfTitle+'"><a href="javascript:void(0);" id="exportPdfGrid_replaceId">'+$.fn.DtGrid.lang[b.option.lang].toolbar.exportPdf+"</a></li>",exportTxt:'<li title="'+$.fn.DtGrid.lang[b.option.lang].toolbar.exportTxtTitle+'"><a href="javascript:void(0);" id="exportTxtGrid_replaceId">'+$.fn.DtGrid.lang[b.option.lang].toolbar.exportTxt+"</a></li>",print:'<li title="'+$.fn.DtGrid.lang[b.option.lang].toolbar.printTitle+'"><a href="javascript:void(0);" id="printGrid_replaceId">'+$.fn.DtGrid.lang[b.option.lang].toolbar.print+"</a></li>"};return c[a]},constructGridToolBar:function(){var b,c,d,e,f,g,a=this;if($("#"+a.option.toolbarContainer).html('<span class="pagination pagination-sm dt-grid-tools"></span><span class="dt-grid-pager"></span>'),void 0!=a.option.tools&&null!=a.option.tools&&""!=a.option.tools)for(b=a.option.tools,c=0;c<b.split("|").length;c++){if(d=b.split("|")[c],"refresh"==d&&(e=$.fn.DtGrid.tools.replaceAll(a.toolbar("refresh"),"replaceId",a.option.id),$("#"+a.option.toolbarContainer+" .dt-grid-tools").append(e),$("#refreshGrid_"+a.option.id).click(function(){a.reload(!0)})),"faseQuery"==d&&(e=$.fn.DtGrid.tools.replaceAll(a.toolbar("faseQuery"),"replaceId",a.option.id),$("#"+a.option.toolbarContainer+" .dt-grid-tools").append(e),$("#faseQuery_"+a.option.id).click(function(){a.faseQuery()})),"advanceQuery"==d&&(e=$.fn.DtGrid.tools.replaceAll(a.toolbar("advanceQuery"),"replaceId",a.option.id),$("#"+a.option.toolbarContainer+" .dt-grid-tools").append(e),$("#advanceQuery_"+a.option.id).click(function(){a.advanceQuery()})),-1!=d.indexOf("export")){for(d=$.fn.DtGrid.tools.replaceAll(d,"export",""),d=$.fn.DtGrid.tools.replaceAll(d,"\\[",""),d=$.fn.DtGrid.tools.replaceAll(d,"\\]",""),e="",f=0;f<d.split(",").length;f++)g=d.split(",")[f],"excel"==g&&(e+=$.fn.DtGrid.tools.replaceAll(a.toolbar("exportExcel"),"replaceId",a.option.id)),"csv"==g&&(e+=$.fn.DtGrid.tools.replaceAll(a.toolbar("exportCsv"),"replaceId",a.option.id)),"pdf"==g&&(e+=$.fn.DtGrid.tools.replaceAll(a.toolbar("exportPdf"),"replaceId",a.option.id)),"txt"==g&&(e+=$.fn.DtGrid.tools.replaceAll(a.toolbar("exportTxt"),"replaceId",a.option.id));for($("#"+a.option.toolbarContainer+" .dt-grid-tools").append(e),f=0;f<d.split(",").length;f++)g=d.split(",")[f],"excel"==g&&$("#exportExcelGrid_"+a.option.id).click(function(){a.exportFile("excel")}),"csv"==g&&$("#exportCsvGrid_"+a.option.id).click(function(){a.exportFile("csv")}),"pdf"==g&&$("#exportPdfGrid_"+a.option.id).click(function(){a.exportFile("pdf")}),"txt"==g&&$("#exportTxtGrid_"+a.option.id).click(function(){a.exportFile("txt")})}"print"==d&&(e=$.fn.DtGrid.tools.replaceAll(a.toolbar("print"),"replaceId",a.option.id),$("#"+a.option.toolbarContainer+" .dt-grid-tools").append(e),$("#printGrid_"+a.option.id).click(function(){a.print()}))}},processBarThread:null,processWidth:null,showProcessBar:function(){var b,a=this;clearInterval(a.processBarThread),$("#dt_grid_process_bar_top_"+a.option.id).remove(),$("#dt_grid_process_bar_bottom_"+a.option.id).remove(),a.processWidth=0,a.processBarThread=null,b="",b+='<div class="dt-grid-process-bar-top bg-primary" id="dt_grid_process_bar_top_'+a.option.id+'"></div>',b+='<div class="dt-grid-process-bar-bottom bg-primary" id="dt_grid_process_bar_bottom_'+a.option.id+'"></div>',$("#"+a.option.gridContainer).append(b),a.processWidth+=.1*Math.random()*(100-a.processWidth),$("#dt_grid_process_bar_top_"+a.option.id).animate({width:a.processWidth+"%"},200),$("#dt_grid_process_bar_bottom_"+a.option.id).animate({width:a.processWidth+"%"},200),a.processBarThread=setInterval(function(){a.processWidth+=.1*Math.random()*(100-a.processWidth),$("#dt_grid_process_bar_top_"+a.option.id).animate({width:a.processWidth+"%"},200),$("#dt_grid_process_bar_bottom_"+a.option.id).animate({width:a.processWidth+"%"},200)},200)},hideProcessBar:function(a){var b=this;clearInterval(b.processBarThread),b=this,$("#dt_grid_process_bar_top_"+b.option.id).animate({width:"100%"},100,function(){$("#dt_grid_process_bar_top_"+b.option.id).remove(),a()}),$("#dt_grid_process_bar_bottom_"+b.option.id).animate({width:"100%"},100,function(){$("#dt_grid_process_bar_bottom_"+b.option.id).remove()})},formatContent:function(a,b){try{if(a.codeTable){var c=a.codeTable[b];return c?c:b}if("number"==a.type&&a.format)return $.fn.DtGrid.tools.numberFormat(b,a.format);if("date"==a.type&&a.format){if(!a.otype)return $.fn.DtGrid.tools.dateFormat(b,a.format);if("time_stamp_s"==a.otype)return b=new Date(1e3*parseFloat(b)),$.fn.DtGrid.tools.dateFormat(b,a.format);if("time_stamp_ms"==a.otype)return b=new Date(parseFloat(b)),$.fn.DtGrid.tools.dateFormat(b,a.format);if("string"==a.otype&&a.oformat)return b=$.fn.DtGrid.tools.toDate(b,a.oformat),$.fn.DtGrid.tools.dateFormat(b,a.format)}}catch(d){}return b},getExtraColumnClass:function(){var e,f,g,h,i,a=this,b="",c=[!0,!0,!0,!0],d=a.option.columns;for(e=0;e<d.length;e++)if(f=d[e],1!=f.hide&&void 0!=f.hideType)for(g=f.hideType.split("|"),h=0;h<g.length;h++)i=g[h],"lg"==i&&(c[0]="visible-lg"),"md"==i&&(c[1]="visible-md"),"sm"==i&&(c[2]="visible-sm"),"xs"==i&&(c[3]="visible-xs");for(e=0;e<c.length;e++)1!=c[e]&&(b+=c[e]+" ");return""==b&&(b="hidden "),b},getColumnClassForHide:function(a){var c,d,e,b="";if(1==a.hide)return b+="hidden ";if(void 0!=a.hideType)for(c=a.hideType.split("|"),d=0;d<c.length;d++)e=c[d],"lg"==e&&(b+="hidden-lg "),"md"==e&&(b+="hidden-md "),"sm"==e&&(b+="hidden-sm "),"xs"==e&&(b+="hidden-xs ");return b},getExtraColumnClassForHide:function(a){var c,d,e,b="";if(1==a.hide)return b+="hidden ";if(void 0!=a.hideType){for(c=a.hideType.split("|"),d=0;d<c.length;d++)e=c[d],"lg"==e&&(b+="visible-lg "),"md"==e&&(b+="visible-md "),"sm"==e&&(b+="visible-sm "),"xs"==e&&(b+="visible-xs ");""==b&&(b="hidden ")}else b="hidden ";return b},goPage:function(a){var b=this,c=b.pager.pageSize,d=b.pager.pageCount,e=parseFloat(a);isNaN(e)||(e>0&&d>=e&&(b.pager.nowPage=e,b.pager.startRecord=c*(e-1),b.load()),0>=e&&b.loadByPage("first"),e>d&&b.loadByPage("last"))},loadByPage:function(a){var c,d,e,b=this;a=a?a:"","first"==a?(c=b.pager.nowPage,c>1&&(b.pager.startRecord=0,b.pager.nowPage=1,b.load())):"prev"==a?(c=b.pager.nowPage,d=b.pager.pageSize,c>1&&(c--,b.pager.nowPage=c,b.pager.startRecord=d*(c-1),b.load())):"next"==a?(c=b.pager.nowPage,d=b.pager.pageSize,e=b.pager.pageCount,e>c&&(c++,b.pager.nowPage=c,b.pager.startRecord=d*(c-1),b.load())):"last"==a?(c=b.pager.nowPage,e=b.pager.pageCount,e>c&&(d=b.pager.pageSize,e=b.pager.pageCount,b.pager.nowPage=0==e?1:e,b.pager.startRecord=d*(e-1),b.pager.startRecord<0&&(b.pager.startRecord=0),b.load())):b.load()},faseQuery:function(){var b,c,d,e,f,g,a=this;if(a.init.fastQueryWindowIsInit)return $("#faseQuery_"+a.option.id+"Modal").modal("show"),void 0;for(b="",b+=$.fn.DtGrid.tools.getWindowStart("faseQuery_"+a.option.id,$.fn.DtGrid.lang[a.option.lang].fastQuery.title),b+='<form id="faseQueryForm_'+a.option.id+'">',b+='	<div class="modal-body form-horizontal">',c=0;c<a.option.columns.length;c++)if(d=a.option.columns[c],1==d.fastQuery){if(b+='<div class="form-group">',b+='	<label class="col-sm-3 control-label text-right">'+d.title+"：</label>","range"==d.fastQueryType)b+='<div class="col-sm-4">',"date"==d.type?(b+='<div class="input-group">',b+='	<input type="text" class="form-control" id="ge_'+d.id+'" name="ge_'+d.id+'" format="'+d.format+'" placeholder="'+$.fn.DtGrid.lang[a.option.lang].fastQuery.selectStart+d.title+'" onclick="WdatePicker({dateFmt:\''+$.fn.DtGrid.tools.replaceAll(d.format,"h","H")+"'});\" />",b+='	<div class="input-group-addon"><i class="fa fa-calendar"></i></div>',b+="</div>"):b+='<input type="text" class="form-control" id="ge_'+d.id+'" name="ge_'+d.id+'" placeholder="'+$.fn.DtGrid.lang[a.option.lang].fastQuery.inputStart+d.title+'" />',b+="</div>",b+='<div class="col-sm-4">',"date"==d.type?(b+='<div class="input-group">',b+='	<input type="text" class="form-control" id="le_'+d.id+'" name="le_'+d.id+'" format="'+d.format+'" placeholder="'+$.fn.DtGrid.lang[a.option.lang].fastQuery.selectEnd+d.title+'" onclick="WdatePicker({dateFmt:\''+$.fn.DtGrid.tools.replaceAll(d.format,"h","H")+"'});\" />",b+='	<div class="input-group-addon"><i class="fa fa-calendar"></i></div>',b+="</div>"):b+='<input type="text" class="form-control" id="le_'+d.id+'" name="le_'+d.id+'" placeholder="'+$.fn.DtGrid.lang[a.option.lang].fastQuery.inputEnd+d.title+'" />',b+="</div>";else if(d.codeTable){b+='<div class="col-sm-4">',b+='	<select class="form-control" id="'+d.fastQueryType+"_"+d.id+'" name="'+d.fastQueryType+"_"+d.id+'">',b+='		<option value="">'+$.fn.DtGrid.lang[a.option.lang].fastQuery.codeTableSelectAll+"</option>";for(e in d.codeTable)b+='	<option value="'+e+'">'+d.codeTable[e]+"</option>";b+="	</select>",b+="</div>"}else b+='<div class="col-sm-4">',"date"==d.type?(b+='<div class="input-group">',f=$.fn.DtGrid.lang[a.option.lang].fastQuery.selectStart,("lt"==d.fastQueryType||"le"==d.fastQueryType)&&(f=$.fn.DtGrid.lang[a.option.lang].fastQuery.selectEnd),b+='	<input type="text" class="form-control" id="'+d.fastQueryType+"_"+d.id+'" name="'+d.fastQueryType+"_"+d.id+'" format="'+d.format+'" placeholder="'+f+d.title+'" onclick="WdatePicker({dateFmt:\''+$.fn.DtGrid.tools.replaceAll(d.format,"h","H")+"'});\" />",b+='	<div class="input-group-addon"><i class="fa fa-calendar"></i></div>',b+="</div>"):b+='<input type="text" class="form-control" id="'+d.fastQueryType+"_"+d.id+'" name="'+d.fastQueryType+"_"+d.id+'" placeholder="'+$.fn.DtGrid.lang[a.option.lang].fastQuery.input+d.title+'" />',b+="</div>";b+="</div>"}b+="	</div>",b+="</form>",g="",g+='<button type="button" class="btn btn-warning" id="resetFaseQuery_'+a.option.id+'">'+$.fn.DtGrid.lang[a.option.lang].fastQuery.buttons.reset+"</button>",g+='<button type="button" class="btn btn-primary" id="doFaseQuery_'+a.option.id+'">'+$.fn.DtGrid.lang[a.option.lang].fastQuery.buttons.query+"</button>",b+=$.fn.DtGrid.tools.getWindowEnd($.fn.DtGrid.lang[a.option.lang].buttons.close,g),$("body").append(b),$("#resetFaseQuery_"+a.option.id).click(function(){document.forms["faseQueryForm_"+a.option.id].reset()}),$("#doFaseQuery_"+a.option.id).click(function(){a.doFaseQuery(document.forms["faseQueryForm_"+a.option.id]),$("#faseQuery_"+a.option.id+"Modal").modal("hide")}),$("#faseQuery_"+a.option.id+"Modal").modal("show"),a.init.fastQueryWindowIsInit=!0},doFaseQuery:function(a){var c,d,e,b=this;for(b.fastQueryParameters=new Object,c=a.elements,d=0;d<c.length;d++)e=c[d],$.fn.DtGrid.tools.equalsIgnoreCase(e.type,"text")||$.fn.DtGrid.tools.equalsIgnoreCase(e.type,"hidden")||$.fn.DtGrid.tools.equalsIgnoreCase(e.type,"textarea")||$.fn.DtGrid.tools.equalsIgnoreCase(e.type,"select-one")||$.fn.DtGrid.tools.equalsIgnoreCase(e.type,"password")?""!=e.name&&(b.fastQueryParameters[e.name]=e.value,b.fastQueryParameters[e.name+"_format"]=e.getAttribute("format")):($.fn.DtGrid.tools.equalsIgnoreCase(e.type,"checkbox")||$.fn.DtGrid.tools.equalsIgnoreCase(e.type,"radio"))&&e.checked&&""!=e.name&&(b.fastQueryParameters[e.name]=e.value,b.fastQueryParameters[e.name+"_format"]=e.getAttribute("format"));
b.load()},doFaseQueryDatasFilter:function(a,b){var d,e,f,g,h,c=new Array;for(d=0;d<a.length;d++){e=a[d],f=!0;for(g in b)if(b[g]&&null!=b[g]&&""!=b[g]){if($.fn.DtGrid.tools.startsWith(g,"eq_")&&(h=e[g.replace("eq_","")],h=h?h:"",h!=b[g])){f=!1;continue}if($.fn.DtGrid.tools.startsWith(g,"ne_")&&(h=e[g.replace("ne_","")],h=h?h:"",h==b[g])){f=!1;continue}if($.fn.DtGrid.tools.startsWith(g,"lk_")&&(h=e[g.replace("lk_","")],h=h?h:"",-1==h.indexOf(b[g]))){f=!1;continue}if($.fn.DtGrid.tools.startsWith(g,"ll_")&&(h=e[g.replace("ll_","")],h=h?h:"",!$.fn.DtGrid.tools.startsWith(h,b[g]))){f=!1;continue}if($.fn.DtGrid.tools.startsWith(g,"rl_")&&(h=e[g.replace("rl_","")],h=h?h:"",!$.fn.DtGrid.tools.endsWith(h,b[g]))){f=!1;continue}if($.fn.DtGrid.tools.startsWith(g,"gt_")){if(h=e[g.replace("gt_","")],h=h?h:"",h instanceof Date&&h.getTime()-$.fn.DtGrid.tools.toDate(b[g],b[g+"_format"]).getTime()<=0){f=!1;continue}if(!(h instanceof Date||isNaN(h))&&parseFloat(h)-parseFloat(b[g])<=0){f=!1;continue}if(!(h instanceof Date)&&isNaN(h)&&h.localeCompare(b[g])<=0){f=!1;continue}}if($.fn.DtGrid.tools.startsWith(g,"ge_")){if(h=e[g.replace("ge_","")],h=h?h:"",h instanceof Date&&h.getTime()-$.fn.DtGrid.tools.toDate(b[g],b[g+"_format"]).getTime()<0){f=!1;continue}if(!(h instanceof Date||isNaN(h))&&parseFloat(h)-parseFloat(b[g])<0){f=!1;continue}if(!(h instanceof Date)&&isNaN(h)&&h.localeCompare(b[g])<0){f=!1;continue}}if($.fn.DtGrid.tools.startsWith(g,"lt_")){if(h=e[g.replace("lt_","")],h=h?h:"",h instanceof Date&&h.getTime()-$.fn.DtGrid.tools.toDate(b[g],b[g+"_format"]).getTime()>=0){f=!1;continue}if(!(h instanceof Date||isNaN(h))&&parseFloat(h)-parseFloat(b[g])>=0){f=!1;continue}if(!(h instanceof Date)&&isNaN(h)&&h.localeCompare(b[g])>=0){f=!1;continue}}if($.fn.DtGrid.tools.startsWith(g,"le_")){if(h=e[g.replace("le_","")],h=h?h:"",h instanceof Date&&h.getTime()-$.fn.DtGrid.tools.toDate(b[g],b[g+"_format"]).getTime()>0){f=!1;continue}if(!(h instanceof Date||isNaN(h))&&parseFloat(h)-parseFloat(b[g])>0){f=!1;continue}if(!(h instanceof Date)&&isNaN(h)&&h.localeCompare(b[g])>0){f=!1;continue}}}f&&c.push(e)}return c},advanceQuery:function(){var b,c,a=this;return a.init.advanceQueryWindowIsInit?($("#advanceQuery_"+a.option.id+"Modal").modal("show"),void 0):(b="",b+=$.fn.DtGrid.tools.getWindowStart("advanceQuery_"+a.option.id,$.fn.DtGrid.lang[a.option.lang].advanceQuery.title),b+='<div class="modal-body advance-query">',b+='	<ul class="nav nav-tabs" role="tablist">',b+='		<li class="active"><a href="#advance_query_condition_'+a.option.id+'" role="tab" data-toggle="tab">'+$.fn.DtGrid.lang[a.option.lang].advanceQuery.condition.title+"</a></li>",b+='		<li><a href="#advance_query_sort_'+a.option.id+'" role="tab" data-toggle="tab">'+$.fn.DtGrid.lang[a.option.lang].advanceQuery.sort.title+"</a></li>",b+="	</ul>",b+='	<div class="tab-content">',b+='		<div class="tab-pane active" id="advance_query_condition_'+a.option.id+'">',b+='			<div class="panel panel-default">',b+='				<div class="form-horizontal text-right advance-query-buttons">',b+='					<button id="insertConditionTr_'+a.option.id+'" title="'+$.fn.DtGrid.lang[a.option.lang].advanceQuery.condition.buttons.insertTitle+'" class="btn btn-xs btn-primary">',b+="						"+$.fn.DtGrid.lang[a.option.lang].advanceQuery.condition.buttons.insert,b+="					</button>",b+='					<button id="clearConditionTr_'+a.option.id+'" title="'+$.fn.DtGrid.lang[a.option.lang].advanceQuery.condition.buttons.clearTitle+'" class="btn btn-xs btn-danger">',b+="						"+$.fn.DtGrid.lang[a.option.lang].advanceQuery.condition.buttons.clear,b+="					</button>",b+="				</div>",b+='				<div class="advance-query-table-container">',b+='					<table id="conditionTable_'+a.option.id+'" class="table table-bordered table-striped table-hover table-condition table-center" style="width:860px;">',b+="						<tr>",b+='							<th style="width:50px;">'+$.fn.DtGrid.lang[a.option.lang].advanceQuery.condition.table.sequence+"</th>",b+='							<th style="width:100px;">'+$.fn.DtGrid.lang[a.option.lang].advanceQuery.condition.table.operation+"</th>",b+='							<th style="width:80px;">'+$.fn.DtGrid.lang[a.option.lang].advanceQuery.condition.table.leftParentheses+"</th>",b+='							<th style="width:140px;">'+$.fn.DtGrid.lang[a.option.lang].advanceQuery.condition.table.field+"</th>",b+='							<th style="width:120px;">'+$.fn.DtGrid.lang[a.option.lang].advanceQuery.condition.table.condition+"</th>",b+="							<th>"+$.fn.DtGrid.lang[a.option.lang].advanceQuery.condition.table.value+"</th>",b+='							<th style="width:80px;">'+$.fn.DtGrid.lang[a.option.lang].advanceQuery.condition.table.rightParentheses+"</th>",b+='							<th style="width:90px;">'+$.fn.DtGrid.lang[a.option.lang].advanceQuery.condition.table.logic+"</th>",b+="						</tr>",b+="					</table>",b+="				</div>",b+='				<div class="clearfix"></div>',b+="			</div>",b+="		</div>",b+='		<div class="tab-pane" id="advance_query_sort_'+a.option.id+'">',b+='			<div class="panel panel-default">',b+='				<div class="form-horizontal text-right advance-query-buttons">',b+='					<button id="insertSortTr_'+a.option.id+'" title="'+$.fn.DtGrid.lang[a.option.lang].advanceQuery.sort.buttons.insertTitle+'" class="btn btn-xs btn-primary">',b+="						"+$.fn.DtGrid.lang[a.option.lang].advanceQuery.sort.buttons.insert,b+="					</button>",b+='					<button id="clearSortTr_'+a.option.id+'" title="'+$.fn.DtGrid.lang[a.option.lang].advanceQuery.sort.buttons.clearTitle+'" class="btn btn-xs btn-danger">',b+="						"+$.fn.DtGrid.lang[a.option.lang].advanceQuery.sort.buttons.clear,b+="					</button>",b+="				</div>",b+='				<div class="advance-query-table-container">',b+='					<table id="sortTable_'+a.option.id+'" class="table table-bordered table-striped table-hover table-condition table-center">',b+="						<tr>",b+="							<th>"+$.fn.DtGrid.lang[a.option.lang].advanceQuery.sort.table.sequence+"</th>",b+="							<th>"+$.fn.DtGrid.lang[a.option.lang].advanceQuery.sort.table.operation+"</th>",b+="							<th>"+$.fn.DtGrid.lang[a.option.lang].advanceQuery.sort.table.field+"</th>",b+="							<th>"+$.fn.DtGrid.lang[a.option.lang].advanceQuery.sort.table.logic+"</th>",b+="						</tr>",b+="					</table>",b+="				</div>",b+='				<div class="clearfix"></div>',b+="			</div>",b+="		</div>",b+="	</div>",b+="</div>",c="",c+='<button type="button" class="btn btn-primary" id="doAdvanceQuery_'+a.option.id+'">',c+="	"+$.fn.DtGrid.lang[a.option.lang].advanceQuery.buttons.query,c+="</button>",b+=$.fn.DtGrid.tools.getWindowEnd($.fn.DtGrid.lang[a.option.lang].buttons.close,c),$("body").append(b),$("#insertConditionTr_"+a.option.id).click(function(){a.insertConditionTr()}),$("#clearConditionTr_"+a.option.id).click(function(){a.clearConditionTr()}),$("#insertSortTr_"+a.option.id).click(function(){a.insertSortTr()}),$("#clearSortTr_"+a.option.id).click(function(){a.clearSortTr()}),$("#doAdvanceQuery_"+a.option.id).click(function(){a.doAdvanceQuery()}),$("#advanceQuery_"+a.option.id+"Modal").modal("show"),a.init.advanceQueryWindowIsInit=!0,void 0)},doAdvanceQuery:function(){var d,a=this,b=!0,c=new Array;$("#conditionTable_"+a.option.id+" tr[id*=tr_"+a.option.id+"_]").each(function(){var m,d=this.id.split("_")[2],e=$("#conditionTable_"+a.option.id+" #seqTd_"+a.option.id+"_"+d).html(),f=$("#conditionTable_"+a.option.id+" #leftParentheses_"+a.option.id+"_"+d).val(),g=$("#conditionTable_"+a.option.id+" #field_"+a.option.id+"_"+d).val(),h=$("#conditionTable_"+a.option.id+" #format_"+a.option.id+"_"+d).val(),i=$("#conditionTable_"+a.option.id+" #condition_"+a.option.id+"_"+d).val(),j=$("#conditionTable_"+a.option.id+" #value_"+a.option.id+"_"+d).val(),k=$("#conditionTable_"+a.option.id+" #rightParentheses_"+a.option.id+"_"+d).val(),l=$("#conditionTable_"+a.option.id+" #logic_"+a.option.id+"_"+d).val();return""==g?($.fn.DtGrid.tools.toast($.fn.DtGrid.tools.replaceAll($.fn.DtGrid.lang[a.option.lang].advanceQuery.condition.errors.fieldMustSelect,"{sequence}",e),"warning",3e3),b=!1,!1):""==i?($.fn.DtGrid.tools.toast($.fn.DtGrid.tools.replaceAll($.fn.DtGrid.lang[a.option.lang].advanceQuery.condition.errors.conditionMustSelect,"{sequence}",e),"warning",3e3),b=!1,!1):(m=new Object,m.id=d,m.seq=e,m.leftParentheses=f,m.field=g,m.format=h,m.condition=i,m.value=j,m.rightParentheses=k,m.logic=l,c.push(m),void 0)}),d=new Array,$("#sortTable_"+a.option.id+" tr[id*=tr_"+a.option.id+"_]").each(function(){var h,c=this.id.split("_")[2],e=$("#sortTable_"+a.option.id+" #seqTd_"+a.option.id+"_"+c).html(),f=$("#sortTable_"+a.option.id+" #sortField_"+a.option.id+"_"+c).val(),g=$("#sortTable_"+a.option.id+" #sortLogic_"+a.option.id+"_"+c).val();return""==f?($.fn.DtGrid.tools.toast($.fn.DtGrid.tools.replaceAll($.fn.DtGrid.lang[a.option.lang].advanceQuery.sort.errors.fieldMustSelect,"{sequence}",e),"warning",3e3),b=!1,!1):""==g?($.fn.DtGrid.tools.toast($.fn.DtGrid.tools.replaceAll($.fn.DtGrid.lang[a.option.lang].advanceQuery.sort.errors.logicMustSelect,"{sequence}",e),"warning",3e3),b=!1,!1):(h=new Object,h.field=f,h.logic=g,d.push(h),void 0)}),b&&(a.advanceQueryParameter=new Object,a.advanceQueryParameter.advanceQueryConditions=c,a.advanceQueryParameter.advanceQuerySorts=d,a.load(),$("#advanceQuery_"+a.option.id+"Modal").modal("hide"))},doAdvanceQueryDatasFilter:function(originalDatas,advanceQueryParameter){var i,record,condition,j,advanceQueryCondition,value,returnDatas=new Array;for(i=0;i<originalDatas.length;i++)if(record=originalDatas[i],advanceQueryParameter.advanceQueryConditions&&advanceQueryParameter.advanceQueryConditions.length>0){for(condition="",j=0;j<advanceQueryParameter.advanceQueryConditions.length;j++)advanceQueryCondition=advanceQueryParameter.advanceQueryConditions[j],condition+=advanceQueryCondition.leftParentheses,"0"==advanceQueryCondition.condition&&(condition+='record["'+advanceQueryCondition.field+'"]=="'+advanceQueryCondition.value+'"'),"1"==advanceQueryCondition.condition&&(condition+='record["'+advanceQueryCondition.field+'"]!="'+advanceQueryCondition.value+'"'),"2"==advanceQueryCondition.condition&&(condition+='record["'+advanceQueryCondition.field+'"].indexOf("'+advanceQueryCondition.value+'")!=-1'),"3"==advanceQueryCondition.condition&&(condition+='$.fn.DtGrid.tools.startsWith(record["'+advanceQueryCondition.field+'"], "'+advanceQueryCondition.value+'")'),"4"==advanceQueryCondition.condition&&(condition+='$.fn.DtGrid.tools.endsWith(record["'+advanceQueryCondition.field+'"], "'+advanceQueryCondition.value+'")'),"5"==advanceQueryCondition.condition&&(value=record[advanceQueryCondition.field],value instanceof Date&&(condition+='(record["'+advanceQueryCondition.field+'"].getTime()-$.fn.DtGrid.tools.toDate("'+advanceQueryCondition.value+'", "'+advanceQueryCondition.format+'").getTime())>0'),value instanceof Date||isNaN(value)||(condition+='(parseFloat(record["'+advanceQueryCondition.field+'"]) - parseFloat("'+advanceQueryCondition.value+'"))>0'),value instanceof Date||!isNaN(value)||(condition+='record["'+advanceQueryCondition.field+'"].localeCompare("'+advanceQueryCondition.value+'")>0')),"6"==advanceQueryCondition.condition&&(value=record[advanceQueryCondition.field],value instanceof Date&&(condition+='(record["'+advanceQueryCondition.field+'"].getTime()-$.fn.DtGrid.tools.toDate("'+advanceQueryCondition.value+'", "'+advanceQueryCondition.format+'").getTime())>=0'),value instanceof Date||isNaN(value)||(condition+='(parseFloat(record["'+advanceQueryCondition.field+'"]) - parseFloat("'+advanceQueryCondition.value+'"))>=0'),value instanceof Date||!isNaN(value)||(condition+='record["'+advanceQueryCondition.field+'"].localeCompare("'+advanceQueryCondition.value+'")>=0')),"7"==advanceQueryCondition.condition&&(value=record[advanceQueryCondition.field],value instanceof Date&&(condition+='(record["'+advanceQueryCondition.field+'"].getTime()-$.fn.DtGrid.tools.toDate("'+advanceQueryCondition.value+'", "'+advanceQueryCondition.format+'").getTime())<0'),value instanceof Date||isNaN(value)||(condition+='(parseFloat(record["'+advanceQueryCondition.field+'"]) - parseFloat("'+advanceQueryCondition.value+'"))<0'),value instanceof Date||!isNaN(value)||(condition+='record["'+advanceQueryCondition.field+'"].localeCompare("'+advanceQueryCondition.value+'")<0')),"8"==advanceQueryCondition.condition&&(value=record[advanceQueryCondition.field],value instanceof Date&&(condition+='(record["'+advanceQueryCondition.field+'"].getTime()-$.fn.DtGrid.tools.toDate("'+advanceQueryCondition.value+'", "'+advanceQueryCondition.format+'").getTime())<=0'),value instanceof Date||isNaN(value)||(condition+='(parseFloat(record["'+advanceQueryCondition.field+'"]) - parseFloat("'+advanceQueryCondition.value+'"))<=0'),value instanceof Date||!isNaN(value)||(condition+='record["'+advanceQueryCondition.field+'"].localeCompare("'+advanceQueryCondition.value+'")<=0')),"9"==advanceQueryCondition.condition&&(condition+='!record["'+advanceQueryCondition.field+'"]'),"10"==advanceQueryCondition.condition&&(condition+='record["'+advanceQueryCondition.field+'"]'),condition+=advanceQueryCondition.rightParentheses,"0"==advanceQueryCondition.logic&&(condition+="&&"),"1"==advanceQueryCondition.logic&&(condition+="||");try{eval(condition)&&returnDatas.push(record)}catch(e){return $.fn.DtGrid.tools.toast($.fn.DtGrid.lang[dtGridReflectionObj.option.lang].advanceQuery.condition.errors.conditionError,"error",3e3),originalDatas}}else returnDatas.push(record);return advanceQueryParameter.advanceQuerySorts&&advanceQueryParameter.advanceQuerySorts.length>0&&(returnDatas=returnDatas.sort(function(a,b){var c,d,e,f;for(c=0;c<advanceQueryParameter.advanceQuerySorts.length;c++)if(d=advanceQueryParameter.advanceQuerySorts[c],e=a[d.field],f=b[d.field],e&&f){if(e==f)continue;if(!isNaN(e)&&!isNaN(f)){if("0"==d.logic)return e-f;if("1"==d.logic)return f-e}if(e instanceof Date&&f instanceof Date){if("0"==d.logic)return e.getTime()-f.getTime();if("1"==d.logic)return f.getTime()-e.getTime()}if("0"==d.logic)return e.localeCompare(f);if("1"==d.logic)return f.localeCompare(e)}return 0})),returnDatas},sequenceCondition:0,insertConditionTr:function(){var c,d,a=this,b="";for(b+='<tr id="tr_'+a.option.id+"_"+a.sequenceCondition+'">',b+='	<td id="seqTd_'+a.option.id+"_"+a.sequenceCondition+'"></td>',b+="	<td>",b+='		<button type="button" id="moveUpConditionTr_'+a.option.id+"_"+a.sequenceCondition+'" class="btn btn-primary btn-xs" title="'+$.fn.DtGrid.lang[a.option.lang].advanceQuery.condition.table.buttons.upTitle+'">'+$.fn.DtGrid.lang[a.option.lang].advanceQuery.condition.table.buttons.up+"</button>",b+='		<button type="button" id="moveDownConditionTr_'+a.option.id+"_"+a.sequenceCondition+'" class="btn btn-primary btn-xs" title="'+$.fn.DtGrid.lang[a.option.lang].advanceQuery.condition.table.buttons.downTitle+'">'+$.fn.DtGrid.lang[a.option.lang].advanceQuery.condition.table.buttons.down+"</button>",b+='		<button type="button" id="deleteConditionTr_'+a.option.id+"_"+a.sequenceCondition+'" class="btn btn-danger btn-xs" title="'+$.fn.DtGrid.lang[a.option.lang].advanceQuery.condition.table.buttons.deleteTitle+'">'+$.fn.DtGrid.lang[a.option.lang].advanceQuery.condition.table.buttons["delete"]+"</button>",b+="	</td>",b+="	<td>",b+='		<input type="text" id="leftParentheses_'+a.option.id+"_"+a.sequenceCondition+'" name="leftParentheses_'+a.option.id+"_"+a.sequenceCondition+'" class="form-control" />',b+="	</td>",b+="	<td>",b+='		<select id="field_'+a.option.id+"_"+a.sequenceCondition+'" name="field_'+a.option.id+"_"+a.sequenceCondition+'" class="form-control">',b+='			<option value=""></option>',c=0;c<a.option.columns.length;c++)d=a.option.columns[c],0!=d.advanceQuery&&(b+='	<option value="'+d.id+'">'+d.title+"</option>");b+="		</select>",b+='		<input type="hidden" id="format_'+a.option.id+"_"+a.sequenceCondition+'" name="format_'+a.option.id+"_"+a.sequenceCondition+'" />',b+="	</td>",b+="	<td>",b+='		<select id="condition_'+a.option.id+"_"+a.sequenceCondition+'" name="condition_'+a.option.id+"_"+a.sequenceCondition+'" class="form-control">',b+='			<option value=""></option>',b+='			<option value="0">=</option>',b+='			<option value="1">!=</option>',b+='			<option value="2">like</option>',b+='			<option value="3">start with</option>',b+='			<option value="4">end with</option>',b+='			<option value="5">&gt;</option>',b+='			<option value="6">&gt;=</option>',b+='			<option value="7">&lt;</option>',b+='			<option value="8">&lt;=</option>',b+='			<option value="9">is null</option>',b+='			<option value="10">is not null</option>',b+="		</select>",b+="	</td>",b+='	<td id="valueTd_'+a.option.id+"_"+a.sequenceCondition+'"></td>',b+="	<td>",b+='		<input type="text" id="rightParentheses_'+a.option.id+"_"+a.sequenceCondition+'" name="rightParentheses_'+a.option.id+"_"+a.sequenceCondition+'" class="form-control" />',b+="	</td>",b+="	<td>",b+='		<select id="logic_'+a.option.id+"_"+a.sequenceCondition+'" name="logic_'+a.option.id+"_"+a.sequenceCondition+'" class="form-control">',b+='			<option value=""></option>',b+='			<option value="0">and</option>',b+='			<option value="1">or</option>',b+="		</select>",b+="	</td>",b+="</tr>",$("#conditionTable_"+a.option.id).append(b),$("#moveUpConditionTr_"+a.option.id+"_"+a.sequenceCondition).click(function(){var b=this.id.split("_")[2];a.moveUpConditionTr(b)}),$("#moveDownConditionTr_"+a.option.id+"_"+a.sequenceCondition).click(function(){var b=this.id.split("_")[2];a.moveDownConditionTr(b)}),$("#deleteConditionTr_"+a.option.id+"_"+a.sequenceCondition).click(function(){var b=this.id.split("_")[2];a.deleteConditionTr(b)}),$("#leftParentheses_"+a.option.id+"_"+a.sequenceCondition).keyup(function(){var b=this.id.split("_")[2];a.validLeftParentheses(b)}),$("#field_"+a.option.id+"_"+a.sequenceCondition).change(function(){var b=this.id.split("_")[2];a.fieldChange(b)}),$("#condition_"+a.option.id+"_"+a.sequenceCondition).change(function(){var b=this.id.split("_")[2];a.conditionChange(b)}),$("#rightParentheses_"+a.option.id+"_"+a.sequenceCondition).keyup(function(){var b=this.id.split("_")[2];a.validRightParentheses(b)}),a.sequenceCondition++,a.resetConditionSeq()},clearConditionTr:function(){var a=this;$("#conditionTable_"+a.option.id+" tr[id*=tr_"+a.option.id+"_]").remove()},resetConditionSeq:function(){var a=this,b=1;$("#conditionTable_"+a.option.id+" tr[id*=tr_"+a.option.id+"_]").each(function(){var c=this.id.split("_")[2];$("#conditionTable_"+a.option.id+" #seqTd_"+a.option.id+"_"+c).html(b),b++})},moveUpConditionTr:function(a){var b=this;$("#conditionTable_"+b.option.id+" #tr_"+b.option.id+"_"+a).prev("#conditionTable_"+b.option.id+" tr[id*=tr_"+b.option.id+"_]").before($("#conditionTable_"+b.option.id+" #tr_"+b.option.id+"_"+a)),b.resetConditionSeq()},moveDownConditionTr:function(a){var b=this;$("#conditionTable_"+b.option.id+" #tr_"+b.option.id+"_"+a).next("#conditionTable_"+b.option.id+" tr[id*=tr_"+b.option.id+"_]").after($("#conditionTable_"+b.option.id+" #tr_"+b.option.id+"_"+a)),b.resetConditionSeq()},deleteConditionTr:function(a){var b=this;$("#conditionTable_"+b.option.id+" #tr_"+b.option.id+"_"+a).remove(),b.resetConditionSeq()},validLeftParentheses:function(a){var b=this,c=$("#leftParentheses_"+b.option.id+"_"+a).val();c.match(/^[\(]*$/g)||(c=$.fn.DtGrid.tools.replaceAll(c,"（","("),c=c.replace(/[^\(]/g,""),$("#leftParentheses_"+b.option.id+"_"+a).val(c))},fieldChange:function(a){var e,f,g,h,b=this,c=$("#field_"+b.option.id+"_"+a).val(),d=$("#condition_"+b.option.id+"_"+a).val();if(""==c||"9"==d||"10"==d)return $("#valueTd_"+b.option.id+"_"+a).html(""),void 0;for(e=new Object,f=0;f<b.option.columns.length;f++)if(b.option.columns[f].id==c&&0!=b.option.columns[f].advanceQuery){e=b.option.columns[f];break}if("date"==e.type)return g="",g+='<div class="input-group">',g+='	<input id="value_'+b.option.id+"_"+a+'" name="value_'+b.option.id+"_"+a+'" class="form-control" onclick="WdatePicker({dateFmt:\''+$.fn.DtGrid.tools.replaceAll(e.format,"h","H")+"'})\" />",g+='	<div class="input-group-addon"><i class="fa fa-calendar"></i></div>',g+="</div>",$("#valueTd_"+b.option.id+"_"+a).html(g),$("#format_"+b.option.id+"_"+a).val(e.format),void 0;if(e.codeTable){g="",g+='<select id="value_'+b.option.id+"_"+a+'" name="value_'+b.option.id+"_"+a+'" class="form-control">',g+='	<option value=""></option>';for(h in e.codeTable)g+='<option value="'+h+'">'+e.codeTable[h]+"</option>";return g+="</select>",$("#valueTd_"+b.option.id+"_"+a).html(g),void 0}g='<input id="value_'+b.option.id+"_"+a+'" name="value_'+b.option.id+"_"+a+'" class="form-control" />',$("#valueTd_"+b.option.id+"_"+a).html(g)},conditionChange:function(a){var d,b=this,c=$("#condition_"+b.option.id+"_"+a).val();"9"==c||"10"==c?$("#valueTd_"+b.option.id+"_"+a).html(""):(d=$("#valueTd_"+b.option.id+"_"+a).html(),""==d&&b.fieldChange(a))},validRightParentheses:function(a){var b=this,c=$("#rightParentheses_"+b.option.id+"_"+a).val();c.match(/^[\(]*$/g)||(c=$.fn.DtGrid.tools.replaceAll(c,"）",")"),c=c.replace(/[^\)]/g,""),$("#rightParentheses_"+b.option.id+"_"+a).val(c))},sequenceSort:0,insertSortTr:function(){var c,d,a=this,b="";for(b+='<tr id="tr_'+a.option.id+"_"+a.sequenceSort+'">',b+='	<td id="seqTd_'+a.option.id+"_"+a.sequenceSort+'"></td>',b+="	<td>",b+='		<button type="button" id="moveUpSortTr_'+a.option.id+"_"+a.sequenceSort+'" class="btn btn-primary btn-xs" title="'+$.fn.DtGrid.lang[a.option.lang].advanceQuery.sort.table.buttons.upTitle+'">'+$.fn.DtGrid.lang[a.option.lang].advanceQuery.sort.table.buttons.up+"</button>",b+='		<button type="button" id="moveDownSortTr_'+a.option.id+"_"+a.sequenceSort+'" class="btn btn-primary btn-xs" title="'+$.fn.DtGrid.lang[a.option.lang].advanceQuery.sort.table.buttons.downTitle+'">'+$.fn.DtGrid.lang[a.option.lang].advanceQuery.sort.table.buttons.down+"</button>",b+='		<button type="button" id="deleteSortTr_'+a.option.id+"_"+a.sequenceSort+'" class="btn btn-danger btn-xs" title="'+$.fn.DtGrid.lang[a.option.lang].advanceQuery.sort.table.buttons.deleteTitle+'">'+$.fn.DtGrid.lang[a.option.lang].advanceQuery.sort.table.buttons["delete"]+"</button>",b+="	</td>",b+="	<td>",b+='		<select id="sortField_'+a.option.id+"_"+a.sequenceSort+'" name="sortField_'+a.option.id+"_"+a.sequenceSort+'" class="form-control">',b+='			<option value=""></option>',c=0;c<a.option.columns.length;c++)d=a.option.columns[c],0!=d.advanceQuery&&(b+='	<option value="'+d.id+'">'+d.title+"</option>");b+="		</select>",b+="	</td>",b+="	<td>",b+='		<select id="sortLogic_'+a.option.id+"_"+a.sequenceSort+'" name="sortLogic_'+a.option.id+"_"+a.sequenceSort+'" class="form-control">',b+='			<option value=""></option>',b+='			<option value="0">'+$.fn.DtGrid.lang[a.option.lang].advanceQuery.sort.logic.asc+"</option>",b+='			<option value="1">'+$.fn.DtGrid.lang[a.option.lang].advanceQuery.sort.logic.desc+"</option>",b+="		</select>",b+="	</td>",b+="</tr>",$("#sortTable_"+a.option.id).append(b),$("#moveUpSortTr_"+a.option.id+"_"+a.sequenceSort).click(function(){var b=this.id.split("_")[2];a.moveUpSortTr(b)}),$("#moveDownSortTr_"+a.option.id+"_"+a.sequenceSort).click(function(){var b=this.id.split("_")[2];a.moveDownSortTr(b)}),$("#deleteSortTr_"+a.option.id+"_"+a.sequenceSort).click(function(){var b=this.id.split("_")[2];a.deleteSortTr(b)}),a.sequenceSort++,a.resetSortSeq()},clearSortTr:function(){var a=this;$("#sortTable_"+a.option.id+" tr[id*=tr_"+a.option.id+"_]").remove()},resetSortSeq:function(){var a=this,b=1;$("#sortTable_"+a.option.id+" tr[id*=tr_"+a.option.id+"_]").each(function(){var c=this.id.split("_")[2];$("#sortTable_"+a.option.id+" #seqTd_"+a.option.id+"_"+c).html(b),b++})},moveUpSortTr:function(a){var b=this;$("#sortTable_"+b.option.id+" #tr_"+b.option.id+"_"+a).prev("#sortTable_"+b.option.id+" tr[id*=tr_"+b.option.id+"_]").before($("#sortTable_"+b.option.id+" #tr_"+b.option.id+"_"+a)),b.resetSortSeq()},moveDownSortTr:function(a){var b=this;$("#sortTable_"+b.option.id+" #tr_"+b.option.id+"_"+a).next("#sortTable_"+b.option.id+" tr[id*=tr_"+b.option.id+"_]").after($("#sortTable_"+b.option.id+" #tr_"+b.option.id+"_"+a)),b.resetSortSeq()},deleteSortTr:function(a){var b=this;$("#sortTable_"+b.option.id+" #tr_"+b.option.id+"_"+a).remove(),b.resetSortSeq()},print:function(){var b,c,d,e,a=this;if(a.init.printWindowIsInit)return $("#dtGridPrint_"+a.option.id+"Modal").modal("show"),void 0;for(b="",b+=$.fn.DtGrid.tools.getWindowStart("dtGridPrint_"+a.option.id,$.fn.DtGrid.lang[a.option.lang].print.title),b+='				<table class="table table-bordered table-print">',b+="					<thead>",b+="						<tr>",b+='							<th><input type="checkbox" id="dt_grid_print_check_'+a.option.id+'" checked="checked" /></th>',b+="							<th>"+$.fn.DtGrid.lang[a.option.lang].print.table.column+"</th>",b+="							<th>"+$.fn.DtGrid.lang[a.option.lang].print.table.operation+"</th>",b+="						</tr>",b+="					</thead>",b+="					<tbody>",c=0;c<a.option.columns.length;c++)d=a.option.columns[c],0!=d.print&&(b+='					<tr id="dt_grid_print_tr_'+a.option.id+"_"+c+'">',b+='						<td><input type="checkbox" id="dt_grid_print_check_'+a.option.id+"_"+c+'" checked="checked" value="'+c+'" /></td>',b+="						<td>"+d.title+"</td>",b+="						<td>",b+='							<button type="button" class="btn btn-primary btn-xs" dataId="'+c+'" id="dt_grid_print_up_'+a.option.id+"_"+c+'" title="'+$.fn.DtGrid.lang[a.option.lang].print.table.buttons.upTitle+'">'+$.fn.DtGrid.lang[a.option.lang].print.table.buttons.up+"</button>",b+='							<button type="button" class="btn btn-primary btn-xs" dataId="'+c+'" id="dt_grid_print_down_'+a.option.id+"_"+c+'" title="'+$.fn.DtGrid.lang[a.option.lang].print.table.buttons.downTitle+'">'+$.fn.DtGrid.lang[a.option.lang].print.table.buttons.down+"</button>",b+="						</td>",b+="					</tr>");b+="					</tbody>",b+="				</table>",e="",e+='<button type="button" class="btn btn-primary" id="dt_grid_print_execute_'+a.option.id+'">',e+="	"+$.fn.DtGrid.lang[a.option.lang].print.buttons.print,e+="</button>",b+=$.fn.DtGrid.tools.getWindowEnd($.fn.DtGrid.lang[a.option.lang].buttons.close,e),$("body").append(b),$("#dt_grid_print_check_"+a.option.id).click(function(){$("input[id*=dt_grid_print_check_"+a.option.id+"_]").attr("checked",this.checked)}),$("button[id*=dt_grid_print_up_"+a.option.id+"_]").click(function(){var b=$(this).attr("dataId"),c=a.option.id;$("#dt_grid_print_tr_"+c+"_"+b).prev("#dtGridPrint_"+c+"Modal tr[id*=dt_grid_print_tr_"+c+"]").before($("#dt_grid_print_tr_"+c+"_"+b))}),$("button[id*=dt_grid_print_down_"+a.option.id+"_]").click(function(){var b=$(this).attr("dataId"),c=a.option.id;$("#dt_grid_print_tr_"+c+"_"+b).next("#dtGridPrint_"+c+"Modal tr[id*=dt_grid_print_tr_"+c+"]").after($("#dt_grid_print_tr_"+c+"_"+b))}),$("#dt_grid_print_execute_"+a.option.id).click(function(){var c,d,b="";if(b+='<table class="dt-grid '+a.option.tableClass+'" id="dt_grid_print_'+a.option.id+'" style="'+a.option.tableStyle+'">',0!=a.option.showHeader&&(b+="<thead>",b+="	<tr>",$("input[id*=dt_grid_print_check_"+a.option.id+"_]:checked").each(function(){var c=this.value;b+='<th class="'+a.option.columns[c].headerClass+'" style="'+a.option.columns[c].headerStyle+'">'+a.option.columns[c].title+"</th>"}),b+="	</tr>",b+="</thead>"),b+="	<tbody>",null!=a.exhibitDatas)for(c=0;c<a.exhibitDatas.length;c++)b+="	<tr>",$("input[id*=dt_grid_print_check_"+a.option.id+"_]:checked").each(function(){var d=this.value;b+='	<td class="'+a.option.columns[d].columnClass+'" style="'+a.option.columns[d].columnStyle+'">',b+=a.option.columns[d].resolution?a.option.columns[d].resolution(a.exhibitDatas[c][a.option.columns[d].id],a.exhibitDatas[c],a.option.columns[d],a,c,d):a.formatContent(a.option.columns[d],a.exhibitDatas[c][a.option.columns[d].id]),b+="	</td>"}),b+="	</tr>";b+="	</tbody>",b+="</table>",d=$("body").scrollTop(),$("body").hide(),$("html").append(b),window.print(),$("#dt_grid_print_"+a.option.id).remove(),$("body").show(),$("#dtGridPrint_"+a.option.id+"Modal").modal("hide"),$("body").scrollTop(d)}),$("#dtGridPrint_"+a.option.id+"Modal").modal("show"),a.init.printWindowIsInit=!0},exportFile:function(a){var c,d,e,f,b=this;if(b.init.exportWindowIsInit[a])return $("#dtGridExport_"+a+"_"+b.option.id+"Modal").modal("show"),void 0;for(c="",c+=$.fn.DtGrid.tools.getWindowStart("dtGridExport_"+a+"_"+b.option.id,$.fn.DtGrid.lang[b.option.lang]["export"][a].title),c+='				<div class="form-export modal-body form-horizontal form-export">',c+='					<div class="form-group">',c+='						<label class="col-sm-3 control-label">'+$.fn.DtGrid.lang[b.option.lang]["export"][a].exportType.title+"</label>",c+='						<div class="col-sm-9">',c+='							<div class="checkbox">',c+='								<label><input type="radio" name="dt_grid_export_export_all_data_'+a+"_"+b.option.id+'" value="0" checked="checked" /> '+$.fn.DtGrid.lang[b.option.lang]["export"][a].exportType.now+"</label>",c+='								<label><input type="radio" name="dt_grid_export_export_all_data_'+a+"_"+b.option.id+'" value="1" /> '+$.fn.DtGrid.lang[b.option.lang]["export"][a].exportType.all+"</label>",c+="							</div>",c+="						</div>",c+="					</div>",c+="				</div>",c+='				<table class="table table-bordered table-export">',c+="					<thead>",c+="						<tr>",c+='							<th><input type="checkbox" class="checkbox checkbox-info" id="dt_grid_export_check_'+a+"_"+b.option.id+'" checked="checked" /></th>',c+="							<th>"+$.fn.DtGrid.lang[b.option.lang]["export"][a].table.column+"</th>",c+="							<th>"+$.fn.DtGrid.lang[b.option.lang]["export"][a].table.operation+"</th>",c+="						</tr>",c+="					</thead>",c+="					<tbody>",d=0;d<b.option.columns.length;d++)e=b.option.columns[d],0!=e["export"]&&(c+='					<tr id="dt_grid_export_tr_'+a+"_"+b.option.id+"_"+d+'">',c+='						<td><input type="checkbox" id="dt_grid_export_check_'+a+"_"+b.option.id+"_"+d+'" checked="checked" class="checkbox checkbox-info" value="'+d+'" /></td>',c+="						<td>"+e.title+"</td>",c+="						<td>",c+='							<button type="button" class="btn btn-primary btn-xs" dataId="'+d+'" id="dt_grid_export_up_'+a+"_"+b.option.id+"_"+d+'" title="'+$.fn.DtGrid.lang[b.option.lang]["export"][a].table.buttons.upTitle+'">'+$.fn.DtGrid.lang[b.option.lang]["export"][a].table.buttons.up+"</button>",c+='							<button type="button" class="btn btn-primary btn-xs" dataId="'+d+'" id="dt_grid_export_down_'+a+"_"+b.option.id+"_"+d+'" title="'+$.fn.DtGrid.lang[b.option.lang]["export"][a].table.buttons.downTitle+'">'+$.fn.DtGrid.lang[b.option.lang]["export"][a].table.buttons.down+"</button>",c+="						</td>",c+="					</tr>");c+="					</tbody>",c+="				</table>",f="",f+='<button type="button" class="btn btn-primary" id="dt_grid_export_execute_'+a+"_"+b.option.id+'">',f+="	"+$.fn.DtGrid.lang[b.option.lang]["export"][a].buttons["export"],f+="</button>",c+=$.fn.DtGrid.tools.getWindowEnd($.fn.DtGrid.lang[b.option.lang].buttons.close,f),$("body").append(c),$("#dt_grid_export_check_"+a+"_"+b.option.id).click(function(){$("input[id*=dt_grid_export_check_"+a+"_"+b.option.id+"_]").attr("checked",this.checked)}),$("button[id*=dt_grid_export_up_"+a+"_"+b.option.id+"_]").click(function(){var c=$(this).attr("dataId"),d=b.option.id;$("#dt_grid_export_tr_"+a+"_"+d+"_"+c).prev("#dtGridExport_"+a+"_"+d+"Modal tr[id*=dt_grid_export_tr_"+a+"_"+d+"]").before($("#dt_grid_export_tr_"+a+"_"+d+"_"+c))}),$("button[id*=dt_grid_export_down_"+a+"_"+b.option.id+"_]").click(function(){var c=$(this).attr("dataId"),d=b.option.id;$("#dt_grid_export_tr_"+a+"_"+d+"_"+c).next("#dtGridExport_"+a+"_"+d+"Modal tr[id*=dt_grid_export_tr_"+a+"_"+d+"]").after($("#dt_grid_export_tr_"+a+"_"+d+"_"+c))}),$("#dt_grid_export_execute_"+a+"_"+b.option.id).click(function(){var c,d,e,f,g,h,i,j,k,l,m,n;for($("#dt_grid_export_form_container_"+a+"_"+b.option.id).remove(),c=document.createElement("div"),c.id="dt_grid_export_form_container_"+a+"_"+b.option.id,c.className="hidden",d=document.createElement("iframe"),d.name="dt_grid_export_iframe_"+a+"_"+b.option.id,c.appendChild(d),e=document.createElement("form"),e.id="dt_grid_export_form_"+a+"_"+b.option.id,e.method="post",e.target="dt_grid_export_iframe_"+a+"_"+b.option.id,e.action=0==b.option.ajaxLoad||1==b.option.loadAll?b.option.exportURL:b.option.loadURL,f=new Object,f.pageSize=b.pager.pageSize,f.startRecord=b.pager.startRecord,f.nowPage=b.pager.nowPage,f.recordCount=b.pager.recordCount,f.pageCount=b.pager.pageCount,f.isExport=!0,f.exportFileName=b.option.exportFileName,f.exportType=a,f.exportAllData="1"==$("input[name*=dt_grid_export_export_all_data_"+a+"_"+b.option.id+"]:checked").val()?!0:!1,f.parameters=new Object,f.fastQueryParameters=new Object,f.advanceQueryConditions=new Array,f.advanceQuerySorts=new Array,b.parameters&&(f.parameters=b.parameters),b.fastQueryParameters&&(f.fastQueryParameters=b.fastQueryParameters),b.advanceQuery&&b.advanceQuery.advanceQueryConditions&&(f.advanceQueryConditions=b.advanceQuery.advanceQueryConditions),b.advanceQuery&&b.advanceQuery.advanceQuerySorts&&(f.advanceQuerySorts=b.advanceQuery.advanceQuerySorts),g=new Array,$("input[id*=dt_grid_export_check_"+a+"_"+b.option.id+"_]:checked").each(function(){g.push(b.option.columns[this.value])
}),f.exportColumns=g,h=new Array,i=!1,f.exportAllData?(0==b.option.ajaxLoad||1==b.option.loadAll)&&(h=b.originalDatas,i=!0):(h=b.exhibitDatas,i=!0),f.exportDataIsProcessed=i,j=new Array,k=0;k<h.length;k++)l=h[k],m=new Object,$("input[id*=dt_grid_export_check_"+a+"_"+b.option.id+"_]:checked").each(function(){var a=b.option.columns[this.value],c=b.formatContent(a,l[a.id]);m[a.id]=c}),j.push(m);f.exportDatas=j,n=document.createElement("input"),n.type="hidden",n.id="dtGridPager",n.name="dtGridPager",n.value=JSON.stringify(f),e.appendChild(n),c.appendChild(e),$("body").append(c),$("#dt_grid_export_form_"+a+"_"+b.option.id).submit(),$("#dtGridExport_"+a+"_"+b.option.id+"Modal").modal("hide")}),b.init.exportWindowIsInit[a]=!0,$("#dtGridExport_"+a+"_"+b.option.id+"Modal").modal("show")},getCheckedRecords:function(){dtGridReflectionObj=this;var a=new Array;return $("input[id*=dt_grid_"+dtGridReflectionObj.option.id+"_check_]:checked").each(function(){a.push(dtGridReflectionObj.exhibitDatas[this.value])}),a},reload:function(a){var b=this;a?b.load():(b.constructGrid(),b.constructGridPageBar())},refresh:function(a){var b=this;b.reload(a)}}},tools:{guid:function(){return"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=0|16*Math.random(),c="x"==a?b:8|3&b;return c.toString(16)})},getWindowStart:function(a,b){var c="";return c+='<div class="modal fade" id="'+a+'Modal" tabindex="-1" role="dialog" aria-labelledby="'+a+'ModalLabel" aria-hidden="true">',c+='	<div class="modal-dialog">',c+='		<div class="modal-content">',c+='			<div class="modal-header">',c+='				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>',c+='				<h4 class="modal-title" id="'+a+'ModalLabel">'+b+"</h4>",c+="			</div>"},getWindowEnd:function(a,b){var c="";return c+='			<div class="modal-footer">',c+='				<button type="button" class="btn btn-default" data-dismiss="modal">',c+="					"+a,c+="				</button>",c+="				"+b,c+="			</div>",c+="		</div>",c+="	</div>",c+="</div>"},toastZIndex:1090,toastThread:null,toastFadeInAnimateTime:500,toastFadeOutAnimateTime:500,openToast:function(a,b,c){var d,e,f;b=b?b:"info",c=c?c:3e3,d="","info"==b&&(d="text-primary"),"warning"==b&&(d="text-warning"),"error"==b&&(d="text-danger"),"success"==b&&(d="text-success"),clearTimeout($.fn.DtGrid.tools.toastThread),$(".toast").remove(),e='<div class="toast '+d+'" style="z-index:'+$.fn.DtGrid.tools.toastZIndex+'">'+a+"</div>",$("body").append(e),f=$(window).width()/2-$(".toast").width()/2-20,$(".toast").css("left",f),$(".toast").fadeIn($.fn.DtGrid.tools.toastFadeInAnimateTime,function(){c&&($.fn.DtGrid.tools.toastThread=setTimeout($.fn.DtGrid.tools.removeToast,c))})},removeToast:function(){$(".toast").fadeOut($.fn.DtGrid.tools.toastFadeOutAnimateTime,function(){$(".toast").remove()})},toast:function(a,b,c){$.fn.DtGrid.tools.openToast(a,b,c)},toDate:function(a,b){var c,d,e,f;b&&null!=b||(b="yyyy-MM-dd hh:mm:ss"),c={"y+":"y","M+":"M","d+":"d","h+":"h","m+":"m","s+":"s"},d={y:"",M:"",d:"",h:"00",m:"00",s:"00"},e=b;for(f in c)new RegExp("("+f+")").test(b)&&(d[c[f]]=a.substring(e.indexOf(RegExp.$1),e.indexOf(RegExp.$1)+RegExp.$1.length));return new Date(d["y"],d["M"]-1,d["d"],d["h"],d["m"],d["s"])},dateFormat:function(a,b){var c,d;if(""==a)return"";a.time&&(a=new Date(a.time)),c={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()},/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(d in c)new RegExp("("+d+")").test(b)&&(b=b.replace(RegExp.$1,1==RegExp.$1.length?c[d]:("00"+c[d]).substr((""+c[d]).length)));return b},replaceAll:function(a,b,c){return a.replace(new RegExp(b,"gm"),c)},startsWith:function(a,b){return void 0==b?!1:0==a.indexOf(b)?!0:!1},endsWith:function(a,b){return void 0==b?!1:a.lastIndexOf(b)==a.length-b.length?!0:!1},equalsIgnoreCase:function(a,b){return new String(a.toLowerCase())==new String(b).toLowerCase()},numberFormat:function(a,b){var e,f,g,h,i,j,k,l,m,n,o,p,c="false",d=Number(a).toString();return 0==d.indexOf("-")&&(c="true",d=d.replace("-",""),a=-a),""==$.trim(d)?"":(/\./g.test(b)?(g=b.split(".")[0],h=b.split(".")[1]):(g=b,h=null),/\./g.test(d)?null!=h?(i=Math.round(parseFloat("0."+d.split(".")[1])*Math.pow(10,h.length))/Math.pow(10,h.length),e=(Math.floor(a)+Math.floor(i)).toString(),f=/\./g.test(i.toString())?i.toString().split(".")[1]:"0"):(e=Math.round(a).toString(),f="0"):(e=d,f="0"),null!=g&&(j="",k=g.match(/0*$/)[0].length,l=null,/,/g.test(g)&&(l=g.match(/,[^,]*/)[0].length-1),m=new RegExp("(\\d{"+l+"})","g"),e.length<k?(j=new Array(k+1).join("0")+e,j=j.substr(j.length-k,k)):j=e,j=j.substr(0,j.length%l)+j.substring(j.length%l).replace(m,(null!=l?",":"")+"$1"),j=j.replace(/^,/,""),e=j),null!=h?(n="",k=h.match(/^0*/)[0].length,f.length<k?(n=f+new Array(k+1).join("0"),o=n.substring(0,k),p=n.substring(k,h.length),n=o+p.replace(/0*$/,"")):n=0==f&&0==k?"":f.substring(0,h.length),f=n):(""!=b||""==b&&"0"==f)&&(f=""),"true"==c?"-"+e+(""==f?"":"."+f):e+(""==f?"":"."+f))}}}}(jQuery);

//默认属性
(function($) {
	$.fn.DtGrid.defaultOptions = {
		grid : {
			lang : 'en',
			ajaxLoad : true,
			loadAll : false,
			loadURL : '',
			datas : null,
			check : false,
			exportFileName : 'datas',
			tableStyle : '',
			tableClass : 'table table-bordered table-hover table-responsive',
			showHeader : true,
			gridContainer : 'dtGridContainer',
			toolbarContainer : 'dtGridToolBarContainer',
			tools : 'refresh|faseQuery|advanceQuery|export[excel,csv,pdf,txt]|print',
			exportFileName : 'datas',
			exportURL : '/dtgrid/export',
			pageSize : 20,
			pageSizeLimit : [20, 50, 100]
		},
		column : {
			id : 'field',
			title : 'field', 
			type : 'string', 
			format : null,
			otype : null, 
			oformat : null,
			columnStyle : '',
			columnClass : '',
			headerStyle : '',
			headerClass : '',
			hide : false,
			hideType : '',
			extra : true,
			codeTable : null,
			fastQuery : false,
			fastQueryType : '',
			advanceQuery : true,
			'export' : true,
			print : true,
			resolution : null
		}
	};
})(jQuery);